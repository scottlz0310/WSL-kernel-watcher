# 実装計画

- [ ] 1. プロジェクト構造とコア設定の初期化
  - プロジェクトディレクトリ構造を作成（src/, tests/, config.toml等）
  - pyproject.tomlファイルを作成し、依存関係とプロジェクト設定を定義
  - 基本的なログ設定とエントリーポイントを実装
  - _要件: 5.1, 5.2, 7.1_

- [ ] 2. 設定管理システムの実装
  - [ ] 2.1 Config データクラスとConfigManagerクラスの実装
    - Config データクラスを定義（チェック間隔、リポジトリURL等）
    - ConfigManagerクラスでTOMLファイルの読み込み・作成機能を実装
    - 設定値の検証とデフォルト値設定機能を実装
    - _要件: 5.1, 5.2, 5.3, 5.4_

  - [ ] 2.2 設定管理の単体テスト作成
    - 設定ファイル読み込みのテストケースを作成
    - デフォルト設定作成のテストケースを作成
    - 不正な設定ファイルのエラーハンドリングテストを作成
    - _要件: 5.4_

- [ ] 3. GitHub API クライアントの実装
  - [ ] 3.1 GitHubAPIClient クラスの基本機能実装
    - GitHub REST APIを使用したリリース情報取得機能を実装
    - プレリリース除外ロジックを実装
    - Release データクラスを定義
    - _要件: 1.1, 1.2_

  - [ ] 3.2 エラーハンドリングとリトライ機能の実装
    - urllib3.Retryを使用したリトライ戦略を実装
    - レート制限対応とエラーハンドリングを実装
    - 指数バックオフによる再試行ロジックを実装
    - _要件: 1.3, 1.4_

  - [ ] 3.3 GitHub API クライアントの単体テスト作成
    - モックを使用したAPI呼び出しテストを作成
    - リトライ機能のテストケースを作成
    - レート制限処理のテストケースを作成
    - _要件: 1.1, 1.2, 1.3, 1.4_

- [ ] 4. WSL連携機能の実装
  - [ ] 4.1 WSLUtils クラスの実装
    - `wsl uname -r`コマンドを使用したカーネルバージョン取得機能を実装
    - セマンティックバージョニングによるバージョン比較機能を実装
    - WSLコマンド実行のエラーハンドリングを実装
    - _要件: 2.1, 2.2, 2.3_

  - [ ] 4.2 ビルドスクリプト実行機能の実装
    - WSL環境でのカーネルビルドスクリプト実行機能を実装
    - ビルド実行状況の表示機能を実装
    - ビルドエラーのハンドリングを実装
    - _要件: 6.1, 6.2, 6.3_

  - [ ] 4.3 WSL機能の単体テスト作成
    - モックを使用したWSLコマンド実行テストを作成
    - バージョン比較ロジックのテストケースを作成
    - エラーハンドリングのテストケースを作成
    - _要件: 2.1, 2.2, 2.3, 6.1, 6.2, 6.3_

- [ ] 5. 通知システムの実装
  - [ ] 5.1 NotificationManager クラスの実装
    - Windows-Toastsを使用したトースト通知表示機能を実装
    - 通知内容（現在バージョン、最新バージョン）の表示を実装
    - Windows 10/11対応の通知機能を実装
    - _要件: 3.1, 3.2, 3.3_

  - [ ] 5.2 通知クリックハンドラーの実装
    - 通知クリック時のコールバック機能を実装
    - 設定に基づくアクション実行機能を実装
    - ビルドアクション無効時の処理を実装
    - _要件: 3.4, 6.4_

  - [ ] 5.3 通知システムの単体テスト作成
    - モックを使用した通知表示テストを作成
    - 通知クリックハンドラーのテストケースを作成
    - Windows対応確認のテストケースを作成
    - _要件: 3.1, 3.2, 3.3, 3.4_

- [ ] 6. タスクトレイ管理の実装
  - [ ] 6.1 TrayManager クラスの実装
    - pystrayを使用したタスクトレイアイコン表示機能を実装
    - アイコン状態管理（通常/更新あり）機能を実装
    - コンテキストメニュー（設定、終了）を実装
    - _要件: 4.1, 4.2, 4.3, 4.4_

  - [ ] 6.2 タスクトレイの単体テスト作成
    - モックを使用したトレイアイコン表示テストを作成
    - アイコン状態変更のテストケースを作成
    - メニュー操作のテストケースを作成
    - _要件: 4.1, 4.2, 4.3, 4.4_

- [ ] 7. スケジューリングシステムの実装
  - [ ] 7.1 Scheduler クラスの実装
    - APSchedulerを使用した定期実行機能を実装
    - 設定可能なチェック間隔機能を実装
    - 監視開始・停止機能を実装
    - _要件: 4.5_

  - [ ] 7.2 更新チェックロジックの実装
    - GitHub API、WSL連携、通知を統合した更新チェック機能を実装
    - バージョン比較結果に基づく通知判定ロジックを実装
    - エラー発生時の適切なハンドリングを実装
    - _要件: 1.1, 2.3, 2.4, 3.1, 4.4_

  - [ ] 7.3 スケジューリングシステムの単体テスト作成
    - 定期実行機能のテストケースを作成
    - 更新チェックロジックの統合テストを作成
    - エラーハンドリングのテストケースを作成
    - _要件: 4.5_

- [ ] 8. ログシステムの実装
  - [ ] 8.1 ログ設定とLogger クラスの実装
    - loggingモジュールを使用したログ設定を実装
    - 適切なログレベル（DEBUG、INFO、WARNING、ERROR）の使い分けを実装
    - AppDataディレクトリへのログファイル出力機能を実装
    - _要件: 7.1, 7.2, 7.3_

  - [ ] 8.2 ログローテーション機能の実装
    - ログファイルサイズ制限とローテーション機能を実装
    - 古いログファイルの自動削除機能を実装
    - ログ設定の動的変更機能を実装
    - _要件: 7.4_

  - [ ] 8.3 ログシステムの単体テスト作成
    - ログ出力機能のテストケースを作成
    - ログローテーションのテストケースを作成
    - ログレベル設定のテストケースを作成
    - _要件: 7.1, 7.2, 7.3, 7.4_

- [ ] 9. メインアプリケーションの統合
  - [ ] 9.1 main.py エントリーポイントの実装
    - 全コンポーネントを統合したメインアプリケーションを実装
    - アプリケーション起動・終了処理を実装
    - 初期化エラーのハンドリングを実装
    - _要件: 1.1, 4.1, 5.1_

  - [ ] 9.2 アプリケーション統合テストの作成
    - エンドツーエンドの動作確認テストを作成
    - 各コンポーネント間の連携テストを作成
    - 異常系のテストケースを作成
    - _要件: 全要件_

- [ ] 10. パッケージング と配布準備
  - [ ] 10.1 パッケージング設定の実装
    - pyproject.tomlでのビルド設定を完成
    - 実行可能ファイル作成のためのエントリーポイント設定
    - 依存関係の最終確認と最適化
    - _要件: 全要件_

  - [ ] 10.2 インストールスクリプトの作成
    - uv/pipxを使用したインストール手順の文書化
    - 設定ファイルテンプレートの作成
    - アンインストール手順の文書化
    - _要件: 5.2_